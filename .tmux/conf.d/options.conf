# Set the default prefix to Ctrl-B.
set -g prefix C-b

# -----------------------------
# Default Appearance (Normal Mode)
# -----------------------------
# Set the default status bar background.
set -g status-bg blue
set -g pane-border-style "fg=white"
set -g pane-active-border-style "fg=blue"

# -----------------------------
# Prefix Settings
# -----------------------------
# Use Ctrl-B as the default tmux prefix.
set -g prefix C-b

# Unbind Ctrl-A as a prefix.
unbind C-a

# -----------------------------
# Entering Navigation Mode
# -----------------------------
# Bind Ctrl-A (without prefix) to immediately enter nav mode and update colors.
bind-key -n C-a \
    set-option -g status-bg green \; \
    set-option -g pane-active-border-style "fg=green" \; \
    switch-client -T nav

# -----------------------------
# Navigation Mode Bindings
# -----------------------------
# In navigation mode, remap Vim-like keys to pane navigation and remain in nav mode.
bind-key -T nav j select-pane -L \; switch-client -T nav
bind-key -T nav k select-pane -D \; switch-client -T nav
bind-key -T nav i select-pane -U \; switch-client -T nav
bind-key -T nav l select-pane -R \; switch-client -T nav

# Arrow keys for pane navigation:
bind-key -T nav Left  select-pane -L \; switch-client -T nav
bind-key -T nav Down  select-pane -D \; switch-client -T nav
bind-key -T nav Up    select-pane -U \; switch-client -T nav
bind-key -T nav Right select-pane -R \; switch-client -T nav

# Additional bindings for splitting panes:
# v: vertical split (creates a pane to the right)
bind-key -T nav v split-window -h \; switch-client -T nav
# s: horizontal split (creates a pane below)
bind-key -T nav h split-window -v \; switch-client -T nav

# Toggle pane fullscreen (zoom) in nav mode.
bind-key -T nav z resize-pane -Z \; switch-client -T nav

# Navigate to next window in nav mode
bind-key -T nav n next-window \; switch-client -T nav

# Navigate to previous window in nav mode
bind-key -T nav p previous-window \; switch-client -T nav

# Create a new window in nav mode
bind-key -T nav c new-window \; switch-client -T nav

# Page up/down for scrolling in nav mode (same as zoom behavior)
bind-key -T nav PPage copy-mode -u
bind-key -T nav NPage send-keys PPage

# Make sure q in copy-mode returns to nav mode
bind-key -T copy-mode-vi q send-keys -X cancel \; switch-client -T nav
bind-key -T copy-mode q send-keys -X cancel \; switch-client -T nav

# Rename window in nav mode (like prefix + ,)
bind-key -T nav , command-prompt -I "#W" "rename-window '%%'" \; switch-client -T nav

# Rename session in nav mode (like prefix + $)
bind-key -T nav '$' command-prompt -I "#S" "rename-session '%%'" \; switch-client -T nav

# Kill pane in nav mode
bind-key -T nav x kill-pane \; switch-client -T nav

# Number keys to select windows by index in nav mode
bind-key -T nav 0 select-window -t 0 \; switch-client -T nav
bind-key -T nav 1 select-window -t 1 \; switch-client -T nav
bind-key -T nav 2 select-window -t 2 \; switch-client -T nav
bind-key -T nav 3 select-window -t 3 \; switch-client -T nav
bind-key -T nav 4 select-window -t 4 \; switch-client -T nav
bind-key -T nav 5 select-window -t 5 \; switch-client -T nav
bind-key -T nav 6 select-window -t 6 \; switch-client -T nav
bind-key -T nav 7 select-window -t 7 \; switch-client -T nav
bind-key -T nav 8 select-window -t 8 \; switch-client -T nav
bind-key -T nav 9 select-window -t 9 \; switch-client -T nav

# -----------------------------
# Quick Exit and Cursor Positioning
# -----------------------------
# 'a' key: Exit navigation mode and move cursor to start of current line
# This provides a quick way to exit nav mode while positioning the cursor
# at the beginning of the line, useful for editing commands or text
bind-key -T nav a \
    set-option -g status-bg blue \; \
    set-option -g pane-active-border-style "fg=blue" \; \
    switch-client -T root \; \
    send-keys Home

# -----------------------------
# Disable Unbound Keys in Navigation Mode
# -----------------------------
# Make all unbound keys in nav mode do nothing (no-op)
# This prevents accidental key presses from having any effect
# We bind a range of common keys to do nothing
bind-key -T nav b {}
bind-key -T nav d {}
bind-key -T nav e {}
bind-key -T nav f {}
bind-key -T nav g {}
bind-key -T nav m {}
bind-key -T nav o {}
bind-key -T nav q {}
bind-key -T nav r {}
bind-key -T nav s {}
bind-key -T nav t {}
bind-key -T nav u {}
bind-key -T nav w {}
bind-key -T nav y {}
# Bind uppercase letters to do nothing as well
bind-key -T nav A {}
bind-key -T nav B {}
bind-key -T nav C {}
bind-key -T nav D {}
bind-key -T nav E {}
bind-key -T nav F {}
bind-key -T nav G {}
bind-key -T nav H {}
bind-key -T nav I {}
bind-key -T nav J {}
bind-key -T nav K {}
bind-key -T nav L {}
bind-key -T nav M {}
bind-key -T nav N {}
bind-key -T nav O {}
bind-key -T nav P {}
bind-key -T nav Q {}
bind-key -T nav R {}
bind-key -T nav S {}
bind-key -T nav T {}
bind-key -T nav U {}
bind-key -T nav V {}
bind-key -T nav W {}
bind-key -T nav X {}
bind-key -T nav Y {}
bind-key -T nav Z {}
# Bind special characters to do nothing
bind-key -T nav Space {}
bind-key -T nav Tab {}
bind-key -T nav BSpace {}
bind-key -T nav Delete {}
bind-key -T nav Home {}
bind-key -T nav End {}
bind-key -T nav Insert {}
bind-key -T nav F1 {}
bind-key -T nav F2 {}
bind-key -T nav F3 {}
bind-key -T nav F4 {}
bind-key -T nav F5 {}
bind-key -T nav F6 {}
bind-key -T nav F7 {}
bind-key -T nav F8 {}
bind-key -T nav F9 {}
bind-key -T nav F10 {}
bind-key -T nav F11 {}
bind-key -T nav F12 {}
bind-key -T nav '!' {}
bind-key -T nav '@' {}
bind-key -T nav '#' {}
bind-key -T nav '%' {}
bind-key -T nav '^' {}
bind-key -T nav '&' {}
bind-key -T nav '*' {}
bind-key -T nav '(' {}
bind-key -T nav ')' {}
bind-key -T nav '-' {}
bind-key -T nav '_' {}
bind-key -T nav '=' {}
bind-key -T nav '+' {}
bind-key -T nav '[' {}
bind-key -T nav ']' {}
bind-key -T nav '{' {}
bind-key -T nav '}' {}
bind-key -T nav '\' {}
bind-key -T nav '|' {}
bind-key -T nav ';' {}
bind-key -T nav ':' {}
bind-key -T nav "'" {}
bind-key -T nav '"' {}
bind-key -T nav '`' {}
bind-key -T nav '~' {}
bind-key -T nav '/' {}
bind-key -T nav '?' {}
bind-key -T nav '.' {}
bind-key -T nav '>' {}
bind-key -T nav '<' {}

# -----------------------------
# Exiting Navigation Mode
# -----------------------------
# Press Escape or Enter in nav mode to exit and revert the colors back to normal.
bind-key -T nav Escape \
    set-option -g status-bg blue \; \
    set-option -g pane-active-border-style "fg=blue" \; \
    switch-client -T root

bind-key -T nav Enter \
    set-option -g status-bg blue \; \
    set-option -g pane-active-border-style "fg=blue" \; \
    switch-client -T root
